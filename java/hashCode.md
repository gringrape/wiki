# hashCode

## Q. hashCode 메서드가 상수를 반환하는 것이 문제가 될까?

### TDD By Example
Pair 가 hash table 의 key 로 쓰이는 상황

```java
// Pair
String from;
String to;

public boolean equals(Object object) {
  Pair pair = (Pair) object;
  return from.equals(pair.from) && to.equals(pair.to);
}

public int hashCode() {
  return 0;
}
```

> 0 은 최악의 해시 코드다. 해시 코드를 이대로 둔다면 해시 테이블에서의 검색이 **마치 선형 검색**과 비슷하게 수행될 것이다. 

### Documentation
https://docs.oracle.com/javase/10/docs/api/java/lang/Object.html#hashCode()

- hashCode 목적
  - 객체로 해시코드를 생성해서, hash 자료 구조를 탐색하는 데에 사용하기 위함. 
- hashCode 조건
  - 같은 객체라면 같은 값 반환.
  - 동등한 객체라면 같은 값.
- 두 객체가 다른 경우
  - **반드시 달라야 하는 것은 아님** => 충돌, 속도저하

### hashMap implementation
![enter image description here](data:image/jpeg;base64,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)

hashCode 는 value 가 저장되어 있는 곳(bucket)의 위치를 알려주는 역할을 한다. 만약, 서로 다른 key 의 hashCode 가 같다면, 저장되는 위치도 같아지게 된다. 따라서, 그림과 같이 같은 위치에 있는 linked list 에 저장되게 된다. 

만약, hashCode 를 적절하게 구현하지 않아 충돌이 많이 발생한다면, linked list 의 길이가 더 늘어나게 될 것이고, linked list 내에서의 탐색이 늘어나게 될것이다. 따라서, 평균 탐색속도가 O(1) 과 멀어질 것이다. 

## A. hashCode 메서드가 상수를 반환하는 것이 문제가 될까?
hashCode 가 항상 상수를 반환하면, 탐색이 linked list 의 탐색이 되므로 사실상 O(n) 의 시간 복잡도를 가져서 성능 문제가 된다.